2021-07-09 10:21:17.628 +07:00 [INF] User profile is available. Using 'C:\Users\Dev02\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-07-09 10:21:18.870 +07:00 [INF] Now listening on: https://localhost:5001
2021-07-09 10:21:18.870 +07:00 [INF] Now listening on: http://localhost:5000
2021-07-09 10:21:18.870 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2021-07-09 10:21:18.870 +07:00 [INF] Hosting environment: Development
2021-07-09 10:21:18.870 +07:00 [INF] Content root path: D:\project\aspnet\Winwin Korea\auth-server\AuthServer
2021-07-09 10:21:19.337 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html  
2021-07-09 10:21:19.431 +07:00 [INF] Request finished in 96.6073ms 200 text/html;charset=utf-8
2021-07-09 10:21:19.595 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json  
2021-07-09 10:21:19.630 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/favicon-32x32.png  
2021-07-09 10:21:19.644 +07:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2021-07-09 10:21:19.645 +07:00 [INF] Request finished in 14.442ms 200 image/png
2021-07-09 10:21:19.694 +07:00 [INF] Request finished in 99.6118ms 200 application/json;charset=utf-8
2021-07-09 10:21:57.139 +07:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/otp/send-otp application/json 39
2021-07-09 10:21:57.143 +07:00 [INF] CORS policy execution successful.
2021-07-09 10:21:57.146 +07:00 [INF] Executing endpoint 'AuthServer.Controllers.OTPController.post (AuthServer)'
2021-07-09 10:21:57.204 +07:00 [INF] Route matched with {action = "post", controller = "OTP"}. Executing controller action with signature System.Threading.Tasks.Task`1[AuthServer.Infrastructure.ServiceModel.ServiceResponse] post(AuthServer.Infrastructure.ViewModel.OtpCodeViewModel) on controller AuthServer.Controllers.OTPController (AuthServer).
2021-07-09 10:21:58.362 +07:00 [INF] Entity Framework Core 5.0.6 initialized 'AppDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-07-09 10:21:59.247 +07:00 [INF] Executed DbCommand (82ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[OtpCode], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[Source], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2021-07-09 10:21:59.282 +07:00 [INF] Executing ObjectResult, writing value of type 'AuthServer.Infrastructure.ServiceModel.ServiceResponse'.
2021-07-09 10:21:59.293 +07:00 [INF] Executed action AuthServer.Controllers.OTPController.post (AuthServer) in 2084.8019ms
2021-07-09 10:21:59.294 +07:00 [INF] Executed endpoint 'AuthServer.Controllers.OTPController.post (AuthServer)'
2021-07-09 10:21:59.300 +07:00 [INF] Request finished in 2167.7452ms 200 application/json; charset=utf-8
2021-07-09 11:29:13.057 +07:00 [INF] User profile is available. Using 'C:\Users\Dev02\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-07-09 11:29:13.780 +07:00 [INF] Now listening on: https://localhost:5001
2021-07-09 11:29:13.780 +07:00 [INF] Now listening on: http://localhost:5000
2021-07-09 11:29:13.781 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2021-07-09 11:29:13.781 +07:00 [INF] Hosting environment: Development
2021-07-09 11:29:13.781 +07:00 [INF] Content root path: D:\project\aspnet\Winwin Korea\auth-server\AuthServer
2021-07-09 11:29:14.320 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html  
2021-07-09 11:29:14.405 +07:00 [INF] Request finished in 87.3031ms 200 text/html;charset=utf-8
2021-07-09 11:29:14.600 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json  
2021-07-09 11:29:14.693 +07:00 [INF] Request finished in 93.1421ms 200 application/json;charset=utf-8
2021-07-09 11:29:43.211 +07:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/otp/send-otp application/json 39
2021-07-09 11:29:43.214 +07:00 [INF] CORS policy execution successful.
2021-07-09 11:29:43.219 +07:00 [INF] Executing endpoint 'AuthServer.Controllers.OTPController.post (AuthServer)'
2021-07-09 11:29:43.275 +07:00 [INF] Route matched with {action = "post", controller = "OTP"}. Executing controller action with signature System.Threading.Tasks.Task`1[AuthServer.Infrastructure.ServiceModel.ServiceResponse] post(AuthServer.Infrastructure.ViewModel.OtpCodeViewModel) on controller AuthServer.Controllers.OTPController (AuthServer).
2021-07-09 11:29:47.453 +07:00 [INF] Executing ObjectResult, writing value of type 'AuthServer.Infrastructure.ServiceModel.ServiceResponse'.
2021-07-09 11:29:47.468 +07:00 [INF] Executed action AuthServer.Controllers.OTPController.post (AuthServer) in 4189.1836ms
2021-07-09 11:29:47.470 +07:00 [INF] Executed endpoint 'AuthServer.Controllers.OTPController.post (AuthServer)'
2021-07-09 11:29:47.473 +07:00 [INF] Request finished in 4262.5779ms 200 application/json; charset=utf-8
2021-07-09 11:33:10.868 +07:00 [INF] User profile is available. Using 'C:\Users\Dev02\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-07-09 11:33:11.397 +07:00 [INF] Now listening on: https://localhost:5001
2021-07-09 11:33:11.397 +07:00 [INF] Now listening on: http://localhost:5000
2021-07-09 11:33:11.398 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2021-07-09 11:33:11.398 +07:00 [INF] Hosting environment: Development
2021-07-09 11:33:11.398 +07:00 [INF] Content root path: D:\project\aspnet\Winwin Korea\auth-server\AuthServer
2021-07-09 11:33:11.882 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html  
2021-07-09 11:33:11.961 +07:00 [INF] Request finished in 81.4748ms 200 text/html;charset=utf-8
2021-07-09 11:33:12.114 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json  
2021-07-09 11:33:12.210 +07:00 [INF] Request finished in 96.0162ms 200 application/json;charset=utf-8
2021-07-09 11:33:29.468 +07:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/otp/send-otp application/json 39
2021-07-09 11:33:29.472 +07:00 [INF] CORS policy execution successful.
2021-07-09 11:33:29.476 +07:00 [INF] Executing endpoint 'AuthServer.Controllers.OTPController.post (AuthServer)'
2021-07-09 11:33:29.517 +07:00 [INF] Route matched with {action = "post", controller = "OTP"}. Executing controller action with signature System.Threading.Tasks.Task`1[AuthServer.Infrastructure.ServiceModel.ServiceResponse] post(AuthServer.Infrastructure.ViewModel.OtpCodeViewModel) on controller AuthServer.Controllers.OTPController (AuthServer).
2021-07-09 11:33:32.488 +07:00 [INF] Executing ObjectResult, writing value of type 'AuthServer.Infrastructure.ServiceModel.ServiceResponse'.
2021-07-09 11:33:32.501 +07:00 [INF] Executed action AuthServer.Controllers.OTPController.post (AuthServer) in 2980.4794ms
2021-07-09 11:33:32.503 +07:00 [INF] Executed endpoint 'AuthServer.Controllers.OTPController.post (AuthServer)'
2021-07-09 11:33:32.505 +07:00 [INF] Request finished in 3037.0711ms 200 application/json; charset=utf-8
2021-07-09 11:35:28.646 +07:00 [INF] User profile is available. Using 'C:\Users\Dev02\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-07-09 11:35:29.280 +07:00 [INF] Now listening on: https://localhost:5001
2021-07-09 11:35:29.280 +07:00 [INF] Now listening on: http://localhost:5000
2021-07-09 11:35:29.280 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2021-07-09 11:35:29.280 +07:00 [INF] Hosting environment: Development
2021-07-09 11:35:29.280 +07:00 [INF] Content root path: D:\project\aspnet\Winwin Korea\auth-server\AuthServer
2021-07-09 11:35:30.001 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html  
2021-07-09 11:35:30.086 +07:00 [INF] Request finished in 88.3977ms 200 text/html;charset=utf-8
2021-07-09 11:35:30.244 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json  
2021-07-09 11:35:30.335 +07:00 [INF] Request finished in 90.9699ms 200 application/json;charset=utf-8
2021-07-09 11:35:59.042 +07:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/otp/send-otp application/json 39
2021-07-09 11:35:59.046 +07:00 [INF] CORS policy execution successful.
2021-07-09 11:35:59.050 +07:00 [INF] Executing endpoint 'AuthServer.Controllers.OTPController.post (AuthServer)'
2021-07-09 11:35:59.098 +07:00 [INF] Route matched with {action = "post", controller = "OTP"}. Executing controller action with signature System.Threading.Tasks.Task`1[AuthServer.Infrastructure.ServiceModel.ServiceResponse] post(AuthServer.Infrastructure.ViewModel.OtpCodeViewModel) on controller AuthServer.Controllers.OTPController (AuthServer).
2021-07-09 11:36:02.525 +07:00 [INF] Executing ObjectResult, writing value of type 'AuthServer.Infrastructure.ServiceModel.ServiceResponse'.
2021-07-09 11:36:02.541 +07:00 [INF] Executed action AuthServer.Controllers.OTPController.post (AuthServer) in 3436.5435ms
2021-07-09 11:36:02.542 +07:00 [INF] Executed endpoint 'AuthServer.Controllers.OTPController.post (AuthServer)'
2021-07-09 11:36:02.545 +07:00 [INF] Request finished in 3502.3411ms 200 application/json; charset=utf-8
2021-07-09 11:37:01.091 +07:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/registerEmail application/json 88
2021-07-09 11:37:01.091 +07:00 [INF] CORS policy execution successful.
2021-07-09 11:37:01.096 +07:00 [INF] Executing endpoint 'AuthServer.Controllers.AuthController.Register (AuthServer)'
2021-07-09 11:37:01.101 +07:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[AuthServer.Infrastructure.ServiceModel.ServiceResponse] Register(AuthServer.Infrastructure.ViewModel.RegisterViewModelEmail) on controller AuthServer.Controllers.AuthController (AuthServer).
2021-07-09 11:37:02.170 +07:00 [INF] Entity Framework Core 5.0.6 initialized 'AppDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-07-09 11:37:02.601 +07:00 [INF] Executed DbCommand (53ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[Source], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2021-07-09 11:37:02.724 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[Source], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2021-07-09 11:37:02.958 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 50), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [FullName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [Source], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2021-07-09 11:37:03.063 +07:00 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[Source], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
2021-07-09 11:37:03.141 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2021-07-09 11:37:03.157 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2021-07-09 11:37:03.329 +07:00 [INF] Executed action AuthServer.Controllers.AuthController.Register (AuthServer) in 2228.1356ms
2021-07-09 11:37:03.330 +07:00 [INF] Executed endpoint 'AuthServer.Controllers.AuthController.Register (AuthServer)'
2021-07-09 11:37:03.331 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Role ENDUSER does not exist.
   at AuthServer.Infrastructure.Service.Auth.AuthService.CreateUserAsyncEmail(RegisterViewModelEmail User) in D:\project\aspnet\Winwin Korea\auth-server\AuthServer.Infrastructure\Service\Auth\AuthService.cs:line 89
   at AuthServer.Controllers.AuthController.Register(RegisterViewModelEmail model) in D:\project\aspnet\Winwin Korea\auth-server\AuthServer\Controllers\AuthController.cs:line 34
   at lambda_method(Closure , Object )
   at Microsoft.Extensions.Internal.ObjectMethodExecutorAwaitable.Awaiter.GetResult()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-07-09 11:37:03.429 +07:00 [INF] Request finished in 2339.5231ms 500 text/plain
2021-07-09 11:40:03.501 +07:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/registerEmail application/json 88
2021-07-09 11:40:03.501 +07:00 [INF] CORS policy execution successful.
2021-07-09 11:40:03.503 +07:00 [INF] Executing endpoint 'AuthServer.Controllers.AuthController.Register (AuthServer)'
2021-07-09 11:40:03.504 +07:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[AuthServer.Infrastructure.ServiceModel.ServiceResponse] Register(AuthServer.Infrastructure.ViewModel.RegisterViewModelEmail) on controller AuthServer.Controllers.AuthController (AuthServer).
2021-07-09 11:40:03.534 +07:00 [INF] Entity Framework Core 5.0.6 initialized 'AppDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-07-09 11:40:03.542 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[Source], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2021-07-09 11:40:03.563 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[Source], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2021-07-09 11:40:03.573 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 50), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [FullName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [Source], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2021-07-09 11:40:03.585 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[Source], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
2021-07-09 11:40:03.594 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2021-07-09 11:40:03.663 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__get_Item_0='?' (DbType = Guid), @__get_Item_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE ([a].[UserId] = @__get_Item_0) AND ([a].[RoleId] = @__get_Item_1)
2021-07-09 11:40:03.669 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2021-07-09 11:40:03.692 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[Source], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2021-07-09 11:40:03.729 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
2021-07-09 11:40:03.746 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@p16='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p17='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (Size = 50), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTimeOffset), @p7='?' (Size = 256), @p8='?' (Size = 256), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [FullName] = @p4, [LockoutEnabled] = @p5, [LockoutEnd] = @p6, [NormalizedEmail] = @p7, [NormalizedUserName] = @p8, [PasswordHash] = @p9, [PhoneNumber] = @p10, [PhoneNumberConfirmed] = @p11, [SecurityStamp] = @p12, [Source] = @p13, [TwoFactorEnabled] = @p14, [UserName] = @p15
WHERE [Id] = @p16 AND [ConcurrencyStamp] = @p17;
SELECT @@ROWCOUNT;
2021-07-09 11:40:04.125 +07:00 [INF] Executing ObjectResult, writing value of type 'AuthServer.Infrastructure.ServiceModel.ServiceResponse'.
2021-07-09 11:40:04.127 +07:00 [INF] Executed action AuthServer.Controllers.AuthController.Register (AuthServer) in 623.7004ms
2021-07-09 11:40:04.128 +07:00 [INF] Executed endpoint 'AuthServer.Controllers.AuthController.Register (AuthServer)'
2021-07-09 11:40:04.128 +07:00 [INF] Request finished in 627.8366ms 200 application/json; charset=utf-8
2021-07-09 11:40:52.940 +07:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/loginEmail application/json 83
2021-07-09 11:40:52.941 +07:00 [INF] CORS policy execution successful.
2021-07-09 11:40:52.941 +07:00 [INF] Executing endpoint 'AuthServer.Controllers.AuthController.Login (AuthServer)'
2021-07-09 11:40:52.946 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[AuthServer.Infrastructure.ServiceModel.ServiceResponse] Login(AuthServer.Infrastructure.ViewModel.LoginViewEmailModel) on controller AuthServer.Controllers.AuthController (AuthServer).
2021-07-09 11:40:52.985 +07:00 [INF] Entity Framework Core 5.0.6 initialized 'AppDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-07-09 11:40:52.995 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[Source], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2021-07-09 11:40:53.015 +07:00 [WRN] Invalid password for user.
2021-07-09 11:40:53.015 +07:00 [WRN] User b91e27c5-00b0-4402-8032-fde27ebc6bb6 failed to provide the correct password.
2021-07-09 11:40:53.017 +07:00 [INF] Executing ObjectResult, writing value of type 'AuthServer.Infrastructure.ServiceModel.ServiceResponse'.
2021-07-09 11:40:53.017 +07:00 [INF] Executed action AuthServer.Controllers.AuthController.Login (AuthServer) in 71.6969ms
2021-07-09 11:40:53.018 +07:00 [INF] Executed endpoint 'AuthServer.Controllers.AuthController.Login (AuthServer)'
2021-07-09 11:40:53.018 +07:00 [INF] Request finished in 77.9543ms 200 application/json; charset=utf-8
2021-07-09 11:40:59.867 +07:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/loginEmail application/json 87
2021-07-09 11:40:59.867 +07:00 [INF] CORS policy execution successful.
2021-07-09 11:40:59.867 +07:00 [INF] Executing endpoint 'AuthServer.Controllers.AuthController.Login (AuthServer)'
2021-07-09 11:40:59.868 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[AuthServer.Infrastructure.ServiceModel.ServiceResponse] Login(AuthServer.Infrastructure.ViewModel.LoginViewEmailModel) on controller AuthServer.Controllers.AuthController (AuthServer).
2021-07-09 11:40:59.871 +07:00 [INF] Entity Framework Core 5.0.6 initialized 'AppDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-07-09 11:40:59.884 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[Source], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2021-07-09 11:40:59.947 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__user_Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-07-09 11:41:00.013 +07:00 [INF] Executed DbCommand (40ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [Roles] AS [r] ON [a].[RoleId] = [r].[Id]
WHERE [a].[UserId] = @__userId_0
2021-07-09 11:41:00.036 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2021-07-09 11:41:00.062 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@__role_Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-07-09 11:41:00.117 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-07-09 11:41:00.149 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[@__request_Email_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[Source], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Email] = @__request_Email_0
2021-07-09 11:41:00.150 +07:00 [INF] Executing ObjectResult, writing value of type 'AuthServer.Infrastructure.ServiceModel.ServiceResponse'.
2021-07-09 11:41:00.151 +07:00 [INF] Executed action AuthServer.Controllers.AuthController.Login (AuthServer) in 283.4148ms
2021-07-09 11:41:00.151 +07:00 [INF] Executed endpoint 'AuthServer.Controllers.AuthController.Login (AuthServer)'
2021-07-09 11:41:00.152 +07:00 [INF] Request finished in 285.2261ms 200 application/json; charset=utf-8
2021-07-09 14:35:06.120 +07:00 [INF] User profile is available. Using 'C:\Users\Dev02\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-07-09 14:35:06.724 +07:00 [INF] Now listening on: https://localhost:5001
2021-07-09 14:35:06.724 +07:00 [INF] Now listening on: http://localhost:5000
2021-07-09 14:35:06.724 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2021-07-09 14:35:06.724 +07:00 [INF] Hosting environment: Development
2021-07-09 14:35:06.724 +07:00 [INF] Content root path: D:\project\aspnet\Winwin Korea\auth-server\AuthServer
2021-07-09 14:35:07.344 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html  
2021-07-09 14:35:07.429 +07:00 [INF] Request finished in 88.1041ms 200 text/html;charset=utf-8
2021-07-09 14:35:07.466 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/swagger-ui.css  
2021-07-09 14:35:07.466 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/swagger-ui-bundle.js  
2021-07-09 14:35:07.466 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/swagger-ui-standalone-preset.js  
2021-07-09 14:35:07.539 +07:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2021-07-09 14:35:07.539 +07:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2021-07-09 14:35:07.543 +07:00 [INF] Request finished in 77.4052ms 200 text/css
2021-07-09 14:35:07.546 +07:00 [INF] Request finished in 79.94ms 200 application/javascript
2021-07-09 14:35:07.556 +07:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2021-07-09 14:35:07.556 +07:00 [INF] Request finished in 90.0957ms 200 application/javascript
2021-07-09 14:35:07.713 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json  
2021-07-09 14:35:07.816 +07:00 [INF] Request finished in 103.277ms 200 application/json;charset=utf-8
2021-07-09 14:35:39.143 +07:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/otp/send-otp application/json 39
2021-07-09 14:35:39.146 +07:00 [INF] CORS policy execution successful.
2021-07-09 14:35:39.150 +07:00 [INF] Executing endpoint 'AuthServer.Controllers.OTPController.post (AuthServer)'
2021-07-09 14:35:39.193 +07:00 [INF] Route matched with {action = "post", controller = "OTP"}. Executing controller action with signature System.Threading.Tasks.Task`1[AuthServer.Infrastructure.ServiceModel.ServiceResponse] post(AuthServer.Infrastructure.ViewModel.OtpCodeViewModel) on controller AuthServer.Controllers.OTPController (AuthServer).
2021-07-09 14:35:42.463 +07:00 [INF] Executing ObjectResult, writing value of type 'AuthServer.Infrastructure.ServiceModel.ServiceResponse'.
2021-07-09 14:35:42.476 +07:00 [INF] Executed action AuthServer.Controllers.OTPController.post (AuthServer) in 3278.6513ms
2021-07-09 14:35:42.477 +07:00 [INF] Executed endpoint 'AuthServer.Controllers.OTPController.post (AuthServer)'
2021-07-09 14:35:42.478 +07:00 [INF] Request finished in 3334.7983ms 200 application/json; charset=utf-8
2021-07-09 14:37:00.794 +07:00 [INF] User profile is available. Using 'C:\Users\Dev02\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-07-09 14:37:01.383 +07:00 [INF] Now listening on: https://localhost:5001
2021-07-09 14:37:01.384 +07:00 [INF] Now listening on: http://localhost:5000
2021-07-09 14:37:01.384 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2021-07-09 14:37:01.384 +07:00 [INF] Hosting environment: Development
2021-07-09 14:37:01.384 +07:00 [INF] Content root path: D:\project\aspnet\Winwin Korea\auth-server\AuthServer
2021-07-09 14:37:01.881 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html  
2021-07-09 14:37:01.970 +07:00 [INF] Request finished in 91.3715ms 200 text/html;charset=utf-8
2021-07-09 14:37:02.214 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json  
2021-07-09 14:37:02.301 +07:00 [INF] Request finished in 88.0515ms 200 application/json;charset=utf-8
2021-07-09 14:38:16.333 +07:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/loginEmail application/json 85
2021-07-09 14:38:16.336 +07:00 [INF] CORS policy execution successful.
2021-07-09 14:38:16.341 +07:00 [INF] Executing endpoint 'AuthServer.Controllers.AuthController.Login (AuthServer)'
2021-07-09 14:38:16.391 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[AuthServer.Infrastructure.ServiceModel.ServiceResponse] Login(AuthServer.Infrastructure.ViewModel.LoginViewEmailModel) on controller AuthServer.Controllers.AuthController (AuthServer).
2021-07-09 14:38:17.256 +07:00 [INF] Entity Framework Core 5.0.6 initialized 'AppDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-07-09 14:38:17.900 +07:00 [INF] Executed DbCommand (68ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[AppleId], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FacebookId], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[Source], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2021-07-09 14:38:18.057 +07:00 [WRN] Invalid password for user.
2021-07-09 14:38:18.059 +07:00 [WRN] User b91e27c5-00b0-4402-8032-fde27ebc6bb6 failed to provide the correct password.
2021-07-09 14:38:18.067 +07:00 [INF] Executing ObjectResult, writing value of type 'AuthServer.Infrastructure.ServiceModel.ServiceResponse'.
2021-07-09 14:38:18.077 +07:00 [INF] Executed action AuthServer.Controllers.AuthController.Login (AuthServer) in 1680.745ms
2021-07-09 14:38:18.078 +07:00 [INF] Executed endpoint 'AuthServer.Controllers.AuthController.Login (AuthServer)'
2021-07-09 14:38:18.083 +07:00 [INF] Request finished in 1751.3661ms 200 application/json; charset=utf-8
2021-07-09 14:38:22.952 +07:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/loginEmail application/json 87
2021-07-09 14:38:22.952 +07:00 [INF] CORS policy execution successful.
2021-07-09 14:38:22.955 +07:00 [INF] Executing endpoint 'AuthServer.Controllers.AuthController.Login (AuthServer)'
2021-07-09 14:38:22.955 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[AuthServer.Infrastructure.ServiceModel.ServiceResponse] Login(AuthServer.Infrastructure.ViewModel.LoginViewEmailModel) on controller AuthServer.Controllers.AuthController (AuthServer).
2021-07-09 14:38:22.986 +07:00 [INF] Entity Framework Core 5.0.6 initialized 'AppDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-07-09 14:38:23.015 +07:00 [INF] Executed DbCommand (25ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[AppleId], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FacebookId], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[Source], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2021-07-09 14:38:23.150 +07:00 [INF] Executed DbCommand (63ms) [Parameters=[@__user_Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-07-09 14:38:23.190 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [Roles] AS [r] ON [a].[RoleId] = [r].[Id]
WHERE [a].[UserId] = @__userId_0
2021-07-09 14:38:23.210 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2021-07-09 14:38:23.243 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__role_Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-07-09 14:38:23.268 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-07-09 14:38:23.295 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[@__request_Email_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[AppleId], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FacebookId], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[Source], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Email] = @__request_Email_0
2021-07-09 14:38:23.438 +07:00 [INF] Executing ObjectResult, writing value of type 'AuthServer.Infrastructure.ServiceModel.ServiceResponse'.
2021-07-09 14:38:23.442 +07:00 [INF] Executed action AuthServer.Controllers.AuthController.Login (AuthServer) in 486.0263ms
2021-07-09 14:38:23.442 +07:00 [INF] Executed endpoint 'AuthServer.Controllers.AuthController.Login (AuthServer)'
2021-07-09 14:38:23.443 +07:00 [INF] Request finished in 491.7899ms 200 application/json; charset=utf-8
2021-07-09 14:38:27.091 +07:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/updatePassword application/json 85
2021-07-09 14:38:27.092 +07:00 [INF] CORS policy execution successful.
2021-07-09 14:38:27.093 +07:00 [INF] Executing endpoint 'AuthServer.Controllers.AuthController.UpdateForgetPassword (AuthServer)'
2021-07-09 14:38:27.101 +07:00 [INF] Route matched with {action = "UpdateForgetPassword", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[AuthServer.Infrastructure.ServiceModel.ServiceResponse] UpdateForgetPassword(AuthServer.Infrastructure.ViewModel.UpdateForgetPasswordViewModel) on controller AuthServer.Controllers.AuthController (AuthServer).
2021-07-09 14:38:27.741 +07:00 [INF] Entity Framework Core 5.0.6 initialized 'AppDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-07-09 14:38:27.771 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[AppleId], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FacebookId], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[Source], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2021-07-09 14:38:27.781 +07:00 [WRN] Invalid password for user.
2021-07-09 14:41:19.219 +07:00 [INF] User profile is available. Using 'C:\Users\Dev02\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-07-09 14:41:19.982 +07:00 [INF] Now listening on: https://localhost:5001
2021-07-09 14:41:19.983 +07:00 [INF] Now listening on: http://localhost:5000
2021-07-09 14:41:19.983 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2021-07-09 14:41:19.983 +07:00 [INF] Hosting environment: Development
2021-07-09 14:41:19.983 +07:00 [INF] Content root path: D:\project\aspnet\Winwin Korea\auth-server\AuthServer
2021-07-09 14:41:20.478 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html  
2021-07-09 14:41:20.559 +07:00 [INF] Request finished in 82.328ms 200 text/html;charset=utf-8
2021-07-09 14:41:20.725 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json  
2021-07-09 14:41:20.813 +07:00 [INF] Request finished in 87.3413ms 200 application/json;charset=utf-8
2021-07-09 14:41:59.467 +07:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/updatePassword application/json 85
2021-07-09 14:41:59.471 +07:00 [INF] CORS policy execution successful.
2021-07-09 14:41:59.475 +07:00 [INF] Executing endpoint 'AuthServer.Controllers.AuthController.UpdateForgetPassword (AuthServer)'
2021-07-09 14:41:59.520 +07:00 [INF] Route matched with {action = "UpdateForgetPassword", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[AuthServer.Infrastructure.ServiceModel.ServiceResponse] UpdateForgetPassword(AuthServer.Infrastructure.ViewModel.UpdateForgetPasswordViewModel) on controller AuthServer.Controllers.AuthController (AuthServer).
2021-07-09 14:42:00.724 +07:00 [INF] Entity Framework Core 5.0.6 initialized 'AppDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-07-09 14:42:01.096 +07:00 [INF] Executed DbCommand (25ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[AppleId], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FacebookId], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[Source], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2021-07-09 14:42:01.230 +07:00 [WRN] VerifyUserTokenAsync() failed with purpose: ResetPassword for user.
2021-07-09 14:51:27.276 +07:00 [INF] User profile is available. Using 'C:\Users\Dev02\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-07-09 14:51:27.898 +07:00 [INF] Now listening on: https://localhost:5001
2021-07-09 14:51:27.898 +07:00 [INF] Now listening on: http://localhost:5000
2021-07-09 14:51:27.899 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2021-07-09 14:51:27.899 +07:00 [INF] Hosting environment: Development
2021-07-09 14:51:27.899 +07:00 [INF] Content root path: D:\project\aspnet\Winwin Korea\auth-server\AuthServer
2021-07-09 14:51:28.458 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html  
2021-07-09 14:51:28.542 +07:00 [INF] Request finished in 88.0695ms 200 text/html;charset=utf-8
2021-07-09 14:51:28.695 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json  
2021-07-09 14:51:28.783 +07:00 [INF] Request finished in 88.0433ms 200 application/json;charset=utf-8
2021-07-09 14:52:04.332 +07:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/updatePassword application/json 86
2021-07-09 14:52:04.335 +07:00 [INF] CORS policy execution successful.
2021-07-09 14:52:04.339 +07:00 [INF] Executing endpoint 'AuthServer.Controllers.AuthController.UpdateForgetPassword (AuthServer)'
2021-07-09 14:52:04.387 +07:00 [INF] Route matched with {action = "UpdateForgetPassword", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[AuthServer.Infrastructure.ServiceModel.ServiceResponse] UpdateForgetPassword(AuthServer.Infrastructure.ViewModel.UpdateForgetPasswordViewModel) on controller AuthServer.Controllers.AuthController (AuthServer).
2021-07-09 14:52:06.099 +07:00 [INF] Entity Framework Core 5.0.6 initialized 'AppDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-07-09 14:52:06.510 +07:00 [INF] Executed DbCommand (60ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[AppleId], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FacebookId], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[Source], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2021-07-09 14:52:06.686 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[AppleId], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FacebookId], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[Source], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2021-07-09 14:52:07.212 +07:00 [INF] Executed DbCommand (94ms) [Parameters=[@p18='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p19='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 50), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [AppleId] = @p1, [ConcurrencyStamp] = @p2, [Email] = @p3, [EmailConfirmed] = @p4, [FacebookId] = @p5, [FullName] = @p6, [LockoutEnabled] = @p7, [LockoutEnd] = @p8, [NormalizedEmail] = @p9, [NormalizedUserName] = @p10, [PasswordHash] = @p11, [PhoneNumber] = @p12, [PhoneNumberConfirmed] = @p13, [SecurityStamp] = @p14, [Source] = @p15, [TwoFactorEnabled] = @p16, [UserName] = @p17
WHERE [Id] = @p18 AND [ConcurrencyStamp] = @p19;
SELECT @@ROWCOUNT;
2021-07-09 14:52:07.413 +07:00 [INF] Executing ObjectResult, writing value of type 'AuthServer.Infrastructure.ServiceModel.ServiceResponse'.
2021-07-09 14:52:07.425 +07:00 [INF] Executed action AuthServer.Controllers.AuthController.UpdateForgetPassword (AuthServer) in 3032.5422ms
2021-07-09 14:52:07.425 +07:00 [INF] Executed endpoint 'AuthServer.Controllers.AuthController.UpdateForgetPassword (AuthServer)'
2021-07-09 14:52:07.431 +07:00 [INF] Request finished in 3099.99ms 200 application/json; charset=utf-8
2021-07-09 14:52:37.809 +07:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/loginEmail application/json 83
2021-07-09 14:52:37.810 +07:00 [INF] CORS policy execution successful.
2021-07-09 14:52:37.812 +07:00 [INF] Executing endpoint 'AuthServer.Controllers.AuthController.Login (AuthServer)'
2021-07-09 14:52:37.819 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[AuthServer.Infrastructure.ServiceModel.ServiceResponse] Login(AuthServer.Infrastructure.ViewModel.LoginViewEmailModel) on controller AuthServer.Controllers.AuthController (AuthServer).
2021-07-09 14:52:37.864 +07:00 [INF] Entity Framework Core 5.0.6 initialized 'AppDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-07-09 14:52:37.876 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[AppleId], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FacebookId], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[Source], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2021-07-09 14:52:37.895 +07:00 [WRN] Invalid password for user.
2021-07-09 14:52:37.895 +07:00 [WRN] User b91e27c5-00b0-4402-8032-fde27ebc6bb6 failed to provide the correct password.
2021-07-09 14:52:37.896 +07:00 [INF] Executing ObjectResult, writing value of type 'AuthServer.Infrastructure.ServiceModel.ServiceResponse'.
2021-07-09 14:52:37.897 +07:00 [INF] Executed action AuthServer.Controllers.AuthController.Login (AuthServer) in 77.4495ms
2021-07-09 14:52:37.897 +07:00 [INF] Executed endpoint 'AuthServer.Controllers.AuthController.Login (AuthServer)'
2021-07-09 14:52:37.897 +07:00 [INF] Request finished in 90.6618ms 200 application/json; charset=utf-8
2021-07-09 14:52:44.528 +07:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/loginEmail application/json 87
2021-07-09 14:52:44.528 +07:00 [INF] CORS policy execution successful.
2021-07-09 14:52:44.529 +07:00 [INF] Executing endpoint 'AuthServer.Controllers.AuthController.Login (AuthServer)'
2021-07-09 14:52:44.529 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[AuthServer.Infrastructure.ServiceModel.ServiceResponse] Login(AuthServer.Infrastructure.ViewModel.LoginViewEmailModel) on controller AuthServer.Controllers.AuthController (AuthServer).
2021-07-09 14:52:44.550 +07:00 [INF] Entity Framework Core 5.0.6 initialized 'AppDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-07-09 14:52:44.581 +07:00 [INF] Executed DbCommand (29ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[AppleId], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FacebookId], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[Source], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2021-07-09 14:52:44.588 +07:00 [WRN] Invalid password for user.
2021-07-09 14:52:44.588 +07:00 [WRN] User b91e27c5-00b0-4402-8032-fde27ebc6bb6 failed to provide the correct password.
2021-07-09 14:52:44.589 +07:00 [INF] Executing ObjectResult, writing value of type 'AuthServer.Infrastructure.ServiceModel.ServiceResponse'.
2021-07-09 14:52:44.590 +07:00 [INF] Executed action AuthServer.Controllers.AuthController.Login (AuthServer) in 60.6836ms
2021-07-09 14:52:44.590 +07:00 [INF] Executed endpoint 'AuthServer.Controllers.AuthController.Login (AuthServer)'
2021-07-09 14:52:44.590 +07:00 [INF] Request finished in 62.9934ms 200 application/json; charset=utf-8
2021-07-09 14:52:49.256 +07:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/loginEmail application/json 85
2021-07-09 14:52:49.256 +07:00 [INF] CORS policy execution successful.
2021-07-09 14:52:49.256 +07:00 [INF] Executing endpoint 'AuthServer.Controllers.AuthController.Login (AuthServer)'
2021-07-09 14:52:49.257 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[AuthServer.Infrastructure.ServiceModel.ServiceResponse] Login(AuthServer.Infrastructure.ViewModel.LoginViewEmailModel) on controller AuthServer.Controllers.AuthController (AuthServer).
2021-07-09 14:52:49.260 +07:00 [INF] Entity Framework Core 5.0.6 initialized 'AppDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-07-09 14:52:49.271 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[AppleId], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FacebookId], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[Source], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2021-07-09 14:52:49.349 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__user_Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2021-07-09 14:52:49.387 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [Roles] AS [r] ON [a].[RoleId] = [r].[Id]
WHERE [a].[UserId] = @__userId_0
2021-07-09 14:52:49.401 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2021-07-09 14:52:49.432 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__role_Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2021-07-09 14:52:49.450 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-07-09 14:52:49.475 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@__request_Email_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[AppleId], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FacebookId], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[Source], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Email] = @__request_Email_0
2021-07-09 14:52:49.476 +07:00 [INF] Executing ObjectResult, writing value of type 'AuthServer.Infrastructure.ServiceModel.ServiceResponse'.
2021-07-09 14:52:49.477 +07:00 [INF] Executed action AuthServer.Controllers.AuthController.Login (AuthServer) in 220.2244ms
2021-07-09 14:52:49.477 +07:00 [INF] Executed endpoint 'AuthServer.Controllers.AuthController.Login (AuthServer)'
2021-07-09 14:52:49.478 +07:00 [INF] Request finished in 221.9671ms 200 application/json; charset=utf-8
2021-07-09 14:53:23.963 +07:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/updatePassword application/json 86
2021-07-09 14:53:23.963 +07:00 [INF] CORS policy execution successful.
2021-07-09 14:53:23.964 +07:00 [INF] Executing endpoint 'AuthServer.Controllers.AuthController.UpdateForgetPassword (AuthServer)'
2021-07-09 14:53:23.964 +07:00 [INF] Route matched with {action = "UpdateForgetPassword", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[AuthServer.Infrastructure.ServiceModel.ServiceResponse] UpdateForgetPassword(AuthServer.Infrastructure.ViewModel.UpdateForgetPasswordViewModel) on controller AuthServer.Controllers.AuthController (AuthServer).
2021-07-09 14:55:16.561 +07:00 [INF] User profile is available. Using 'C:\Users\Dev02\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-07-09 14:55:17.299 +07:00 [INF] Now listening on: https://localhost:5001
2021-07-09 14:55:17.299 +07:00 [INF] Now listening on: http://localhost:5000
2021-07-09 14:55:17.299 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2021-07-09 14:55:17.299 +07:00 [INF] Hosting environment: Development
2021-07-09 14:55:17.299 +07:00 [INF] Content root path: D:\project\aspnet\Winwin Korea\auth-server\AuthServer
2021-07-09 14:55:17.990 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html  
2021-07-09 14:55:18.087 +07:00 [INF] Request finished in 98.1111ms 200 text/html;charset=utf-8
2021-07-09 14:55:18.252 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json  
2021-07-09 14:55:18.358 +07:00 [INF] Request finished in 105.9377ms 200 application/json;charset=utf-8
2021-07-09 14:55:44.680 +07:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/updatePassword application/json 88
2021-07-09 14:55:44.684 +07:00 [INF] CORS policy execution successful.
2021-07-09 14:55:44.688 +07:00 [INF] Executing endpoint 'AuthServer.Controllers.AuthController.UpdateForgetPassword (AuthServer)'
2021-07-09 14:55:44.731 +07:00 [INF] Route matched with {action = "UpdateForgetPassword", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[AuthServer.Infrastructure.ServiceModel.ServiceResponse] UpdateForgetPassword(AuthServer.Infrastructure.ViewModel.UpdateForgetPasswordViewModel) on controller AuthServer.Controllers.AuthController (AuthServer).
2021-07-09 14:55:45.310 +07:00 [INF] Executing ObjectResult, writing value of type 'AuthServer.Infrastructure.ServiceModel.ServiceResponse'.
2021-07-09 14:55:45.321 +07:00 [INF] Executed action AuthServer.Controllers.AuthController.UpdateForgetPassword (AuthServer) in 584.3904ms
2021-07-09 14:55:45.322 +07:00 [INF] Executed endpoint 'AuthServer.Controllers.AuthController.UpdateForgetPassword (AuthServer)'
2021-07-09 14:55:45.326 +07:00 [INF] Request finished in 646.3195ms 200 application/json; charset=utf-8
2021-07-09 14:56:03.154 +07:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/updatePassword application/json 88
2021-07-09 14:56:03.155 +07:00 [INF] CORS policy execution successful.
2021-07-09 14:56:03.158 +07:00 [INF] Executing endpoint 'AuthServer.Controllers.AuthController.UpdateForgetPassword (AuthServer)'
2021-07-09 14:56:03.158 +07:00 [INF] Route matched with {action = "UpdateForgetPassword", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[AuthServer.Infrastructure.ServiceModel.ServiceResponse] UpdateForgetPassword(AuthServer.Infrastructure.ViewModel.UpdateForgetPasswordViewModel) on controller AuthServer.Controllers.AuthController (AuthServer).
2021-07-09 14:56:03.455 +07:00 [INF] Executing ObjectResult, writing value of type 'AuthServer.Infrastructure.ServiceModel.ServiceResponse'.
2021-07-09 14:56:03.456 +07:00 [INF] Executed action AuthServer.Controllers.AuthController.UpdateForgetPassword (AuthServer) in 297.0498ms
2021-07-09 14:56:03.456 +07:00 [INF] Executed endpoint 'AuthServer.Controllers.AuthController.UpdateForgetPassword (AuthServer)'
2021-07-09 14:56:03.457 +07:00 [INF] Request finished in 303.6852ms 200 application/json; charset=utf-8
2021-07-09 14:56:08.352 +07:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/updatePassword application/json 87
2021-07-09 14:56:08.352 +07:00 [INF] CORS policy execution successful.
2021-07-09 14:56:08.353 +07:00 [INF] Executing endpoint 'AuthServer.Controllers.AuthController.UpdateForgetPassword (AuthServer)'
2021-07-09 14:56:08.353 +07:00 [INF] Route matched with {action = "UpdateForgetPassword", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[AuthServer.Infrastructure.ServiceModel.ServiceResponse] UpdateForgetPassword(AuthServer.Infrastructure.ViewModel.UpdateForgetPasswordViewModel) on controller AuthServer.Controllers.AuthController (AuthServer).
2021-07-09 14:56:08.409 +07:00 [INF] Executing ObjectResult, writing value of type 'AuthServer.Infrastructure.ServiceModel.ServiceResponse'.
2021-07-09 14:56:08.410 +07:00 [INF] Executed action AuthServer.Controllers.AuthController.UpdateForgetPassword (AuthServer) in 56.5898ms
2021-07-09 14:56:08.410 +07:00 [INF] Executed endpoint 'AuthServer.Controllers.AuthController.UpdateForgetPassword (AuthServer)'
2021-07-09 14:56:08.411 +07:00 [INF] Request finished in 58.9466ms 200 application/json; charset=utf-8
2021-07-09 14:56:13.853 +07:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/updatePassword application/json 87
2021-07-09 14:56:13.853 +07:00 [INF] CORS policy execution successful.
2021-07-09 14:56:13.854 +07:00 [INF] Executing endpoint 'AuthServer.Controllers.AuthController.UpdateForgetPassword (AuthServer)'
2021-07-09 14:56:13.854 +07:00 [INF] Route matched with {action = "UpdateForgetPassword", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[AuthServer.Infrastructure.ServiceModel.ServiceResponse] UpdateForgetPassword(AuthServer.Infrastructure.ViewModel.UpdateForgetPasswordViewModel) on controller AuthServer.Controllers.AuthController (AuthServer).
2021-07-09 14:56:13.864 +07:00 [INF] Executing ObjectResult, writing value of type 'AuthServer.Infrastructure.ServiceModel.ServiceResponse'.
2021-07-09 14:56:13.865 +07:00 [INF] Executed action AuthServer.Controllers.AuthController.UpdateForgetPassword (AuthServer) in 10.2375ms
2021-07-09 14:56:13.865 +07:00 [INF] Executed endpoint 'AuthServer.Controllers.AuthController.UpdateForgetPassword (AuthServer)'
2021-07-09 14:56:13.865 +07:00 [INF] Request finished in 12.1869ms 200 application/json; charset=utf-8
2021-07-09 14:56:29.522 +07:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/updatePassword application/json 87
2021-07-09 14:56:29.522 +07:00 [INF] CORS policy execution successful.
2021-07-09 14:56:29.523 +07:00 [INF] Executing endpoint 'AuthServer.Controllers.AuthController.UpdateForgetPassword (AuthServer)'
2021-07-09 14:56:29.523 +07:00 [INF] Route matched with {action = "UpdateForgetPassword", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[AuthServer.Infrastructure.ServiceModel.ServiceResponse] UpdateForgetPassword(AuthServer.Infrastructure.ViewModel.UpdateForgetPasswordViewModel) on controller AuthServer.Controllers.AuthController (AuthServer).
2021-07-09 14:56:29.543 +07:00 [INF] Executing ObjectResult, writing value of type 'AuthServer.Infrastructure.ServiceModel.ServiceResponse'.
2021-07-09 14:56:29.543 +07:00 [INF] Executed action AuthServer.Controllers.AuthController.UpdateForgetPassword (AuthServer) in 19.8579ms
2021-07-09 14:56:29.543 +07:00 [INF] Executed endpoint 'AuthServer.Controllers.AuthController.UpdateForgetPassword (AuthServer)'
2021-07-09 14:56:29.544 +07:00 [INF] Request finished in 22.3724ms 200 application/json; charset=utf-8
2021-07-09 14:56:50.571 +07:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/updatePassword application/json 87
2021-07-09 14:56:50.571 +07:00 [INF] CORS policy execution successful.
2021-07-09 14:56:50.572 +07:00 [INF] Executing endpoint 'AuthServer.Controllers.AuthController.UpdateForgetPassword (AuthServer)'
2021-07-09 14:56:50.572 +07:00 [INF] Route matched with {action = "UpdateForgetPassword", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[AuthServer.Infrastructure.ServiceModel.ServiceResponse] UpdateForgetPassword(AuthServer.Infrastructure.ViewModel.UpdateForgetPasswordViewModel) on controller AuthServer.Controllers.AuthController (AuthServer).
2021-07-09 14:58:17.764 +07:00 [INF] Executing ObjectResult, writing value of type 'AuthServer.Infrastructure.ServiceModel.ServiceResponse'.
2021-07-09 14:58:17.764 +07:00 [INF] Executed action AuthServer.Controllers.AuthController.UpdateForgetPassword (AuthServer) in 87192.4357ms
2021-07-09 14:58:17.765 +07:00 [INF] Executed endpoint 'AuthServer.Controllers.AuthController.UpdateForgetPassword (AuthServer)'
2021-07-09 14:58:17.765 +07:00 [INF] Request finished in 87197.7009ms 200 application/json; charset=utf-8
2021-07-09 14:58:20.940 +07:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/auth/updatePassword application/json 87
2021-07-09 14:58:29.966 +07:00 [INF] CORS policy execution successful.
2021-07-09 14:58:29.967 +07:00 [INF] Executing endpoint 'AuthServer.Controllers.AuthController.UpdateForgetPassword (AuthServer)'
2021-07-09 14:58:29.968 +07:00 [INF] Route matched with {action = "UpdateForgetPassword", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[AuthServer.Infrastructure.ServiceModel.ServiceResponse] UpdateForgetPassword(AuthServer.Infrastructure.ViewModel.UpdateForgetPasswordViewModel) on controller AuthServer.Controllers.AuthController (AuthServer).
2021-07-09 14:58:34.564 +07:00 [INF] Entity Framework Core 5.0.6 initialized 'AppDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-07-09 14:58:35.867 +07:00 [INF] Executed DbCommand (47ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[AppleId], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FacebookId], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[Source], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2021-07-09 14:58:36.205 +07:00 [INF] Executed DbCommand (175ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[AppleId], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FacebookId], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[Source], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2021-07-09 14:58:36.492 +07:00 [INF] Executed DbCommand (127ms) [Parameters=[@p18='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p19='?' (Size = 4000), @p3='?' (Size = 256), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 50), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Users] SET [AccessFailedCount] = @p0, [AppleId] = @p1, [ConcurrencyStamp] = @p2, [Email] = @p3, [EmailConfirmed] = @p4, [FacebookId] = @p5, [FullName] = @p6, [LockoutEnabled] = @p7, [LockoutEnd] = @p8, [NormalizedEmail] = @p9, [NormalizedUserName] = @p10, [PasswordHash] = @p11, [PhoneNumber] = @p12, [PhoneNumberConfirmed] = @p13, [SecurityStamp] = @p14, [Source] = @p15, [TwoFactorEnabled] = @p16, [UserName] = @p17
WHERE [Id] = @p18 AND [ConcurrencyStamp] = @p19;
SELECT @@ROWCOUNT;
2021-07-09 14:58:43.723 +07:00 [INF] Executing ObjectResult, writing value of type 'AuthServer.Infrastructure.ServiceModel.ServiceResponse'.
2021-07-09 14:58:43.725 +07:00 [INF] Executed action AuthServer.Controllers.AuthController.UpdateForgetPassword (AuthServer) in 13756.7171ms
2021-07-09 14:58:43.725 +07:00 [INF] Executed endpoint 'AuthServer.Controllers.AuthController.UpdateForgetPassword (AuthServer)'
2021-07-09 14:58:43.727 +07:00 [INF] Request finished in 22787.055ms 200 application/json; charset=utf-8
2021-07-09 15:06:40.477 +07:00 [INF] User profile is available. Using 'C:\Users\Dev02\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-07-09 15:06:41.083 +07:00 [INF] Now listening on: https://localhost:5001
2021-07-09 15:06:41.084 +07:00 [INF] Now listening on: http://localhost:5000
2021-07-09 15:06:41.084 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2021-07-09 15:06:41.084 +07:00 [INF] Hosting environment: Development
2021-07-09 15:06:41.084 +07:00 [INF] Content root path: D:\project\aspnet\Winwin Korea\auth-server\AuthServer
2021-07-09 15:06:41.508 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html  
2021-07-09 15:06:41.587 +07:00 [INF] Request finished in 81.7357ms 200 text/html;charset=utf-8
2021-07-09 15:06:41.751 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json  
2021-07-09 15:06:41.848 +07:00 [INF] Request finished in 97.1787ms 200 application/json;charset=utf-8
